{"version":3,"sources":["TRAApi.js","components/RouteSelector.js","components/TrainInfo.js","components/StationInfo.js","App.js","serviceWorker.js","index.js"],"names":["ids","基隆","八堵","七堵","五堵","汐止","南港","松山","萬華","臺北","板橋","山佳","樹林","鶯歌","桃園","內壢","中壢","埔心","楊梅","富岡","湖口","新豐","竹北","北新竹","新竹","香山","崎頂","竹南","三坑","百福","汐科","浮洲","北湖","南樹林","三姓橋","新富","談文","大山","後龍","龍港","新埔","白沙屯","通霄","苑裡","日南","大甲","臺中港","清水","沙鹿","龍井","大肚","追分","彰化","花壇","員林","永靖","社頭","斗六","南靖","臺南","大橋","豐富","烏日","鳳山","南州","內獅","吉安","大富","關山","漢本","瑞芳","龜山","冬山","八斗子","千甲","樹調","斗南","新營","保安","嘉北","南勢","大慶","九曲堂","崁頂","加祿","康樂","萬榮","池上","南澳","暖暖","大里","中里","平溪","內灣","花蓮港","民雄","林鳳營","大湖","橋頭","南科","泰安","頭家厝","麟洛","枋寮","瀧溪","林榮新光","東里","臺東","景美","貢寮","四城","十分","九讚頭","龍泉","大林","柳營","路竹","新左營","銅鑼","太原","六塊厝","林邊","枋野","平和","瑞穗","瑞源","和仁","三貂嶺","頭城","蘇澳新","上員","六家","沙崙","石榴","隆田","岡山","仁德","三義","新烏日","屏東","佳冬","古莊","壽豐","三民","鹿野","崇德","牡丹","頂埔","蘇澳","竹東","源泉","海科館","林內","拔林","楠梓","內惟","后里","栗林","歸來","東海","大武","豐田","玉里","山里","新城","雙溪","礁溪","大華","橫山","濁水","石龜","善化","左營","三塊厝","潭子","精武","竹田","科工館","太麻里","鳳林","富里","東澳","花蓮","石城","二結","嶺腳","富貴","水里","嘉義","新市","高雄","造橋","臺中","五權","潮州","正義","知本","光復","海端","武塔","四腳亭","大溪","羅東","菁桐","榮華","車埕","二水","後壁","中洲","大村","苗栗","成功","後庄","鎮安","枋山","志學","富源","瑞和","和平","侯硐","外澳","新馬","竹中","新莊","長榮大學","田中","水上","永康","鼓山","美術館","豐原","松竹","西勢","民族","金崙","南平","東竹","永樂","北埔","福隆","宜蘭","望古","合興","集集","trainType","1100","1101","1102","1103","1106","1107","1108","1109","1110","1111","1114","1115","1120","1131","1132","1140","110F","110A","110E","110B","110C","110D","pad","number","concat","estimatedTime","departureTime","arrivalTime","regExp","m1","exec","m2","s1","Number","s2","result","Math","trunc","dateString","t","arguments","length","undefined","Date","date","getDate","month","getMonth","year","getFullYear","timeString","encode","getHours","getMinutes","dataFilter","trains","map","_ref","TrainNo","EndingStationName","DepartureTime","TrainTypeID","Direction","ScheduledDepartureTime","DelayTime","Zh_tw","slice","TrainTypeName","routeFilter","_ref2","_ref2$DailyTrainInfo","DailyTrainInfo","OriginStopTime","ArrivalTime","DestinationStopTime","EstimatedTime","routeSorter","current","filter","sort","t1","t2","sortByDirection","reduce","output","push","title","getTrainsData","_ref3","Object","asyncToGenerator","regenerator_default","a","mark","_callee","url","sorter","_args","wrap","_context","prev","next","fetch","then","res","json","abrupt","sent","stop","_x","apply","this","getLiveBoardByStationId","_ref4","_callee2","id","data","_context2","_x2","getTrainsByStationId","_ref5","_callee3","tString","liveBoard","final","_context3","d","i","trainIdOfLast","index","findIndex","_x3","TRAApi","getTrainsByStationName","name","getTrainsByRouteName","_ref6","_callee4","start","destination","startId","destinationId","_context4","_x4","_x5","stations","withStyles","formControl","minWidth","container","padding","display","justifyContent","marginBottom","button","alignSelf","fontSize","props","classes","onChange","onSwap","react_default","createElement","Paper_default","elevation","className","FormControl_default","variant","InputLabel_default","htmlFor","Select_default","value","input","OutlinedInput_default","labelWidth","s","MenuItem_default","key","Button_default","onClick","SwapHoriz_default","trainTypeValue","自強","太魯閣","普悠瑪","莒光","復興","區間快","區間車","普快車","TrainInfo","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","handleExpand","setState","folded","handleSort","sortBy","state","hasMore","_this$state","_this$props","constainer","Typography_default","gutterBottom","align","isNaN","ExpandMore_default","ExpandLess_default","Component","backgroundColor","listStyle","margin","& li","gridTemplateColumns","height","& li.title","borderBottom","paddingBottom","& li.folded","& div","alignItems","& div.center","& div.left","& .clickable","cursor","& button","StationInfo","routes","loading","loadingHolder","components_TrainInfo","App","componentDidMount","handleStationDataLoad","handleSwap","handleSelectorChange","_this$setState","_ref2$target","target","defineProperty","_this$state2","t0","_this$state3","components_RouteSelector","components_StationInfo","Boolean","window","location","hostname","match","ReactDOM","render","src_App_0","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"0SAAMA,UAAM,CAACC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,qBAAM,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,qBAAM,OAAOC,qBAAM,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,qBAAM,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,qBAAM,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,qBAAM,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,qBAAM,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,qBAAM,OAAOC,eAAK,OAAOC,qBAAM,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,qBAAM,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,2BAAO,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,qBAAM,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,qBAAM,OAAOC,eAAK,OAAOC,eAAK,OAAOC,qBAAM,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,qBAAM,OAAOC,eAAK,OAAOC,qBAAM,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,qBAAM,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,qBAAM,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,qBAAM,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,qBAAM,OAAOC,qBAAM,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,qBAAM,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,O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","file":"static/js/main.27bd3e42.chunk.js","sourcesContent":["const ids = {\"基隆\":\"1001\",\"八堵\":\"1002\",\"七堵\":\"1003\",\"五堵\":\"1004\",\"汐止\":\"1005\",\"南港\":\"1006\",\"松山\":\"1007\",\"萬華\":\"1009\",\"臺北\":\"1008\",\"板橋\":\"1011\",\"山佳\":\"1013\",\"樹林\":\"1012\",\"鶯歌\":\"1014\",\"桃園\":\"1015\",\"內壢\":\"1016\",\"中壢\":\"1017\",\"埔心\":\"1018\",\"楊梅\":\"1019\",\"富岡\":\"1020\",\"湖口\":\"1021\",\"新豐\":\"1022\",\"竹北\":\"1023\",\"北新竹\":\"1024\",\"新竹\":\"1025\",\"香山\":\"1026\",\"崎頂\":\"1027\",\"竹南\":\"1028\",\"三坑\":\"1029\",\"百福\":\"1030\",\"汐科\":\"1031\",\"浮洲\":\"1032\",\"北湖\":\"1033\",\"南樹林\":\"1034\",\"三姓橋\":\"1035\",\"新富\":\"1036\",\"談文\":\"1102\",\"大山\":\"1104\",\"後龍\":\"1105\",\"龍港\":\"1106\",\"新埔\":\"1108\",\"白沙屯\":\"1107\",\"通霄\":\"1109\",\"苑裡\":\"1110\",\"日南\":\"1111\",\"大甲\":\"1112\",\"臺中港\":\"1113\",\"清水\":\"1114\",\"沙鹿\":\"1115\",\"龍井\":\"1116\",\"大肚\":\"1117\",\"追分\":\"1118\",\"彰化\":\"1120\",\"花壇\":\"1202\",\"員林\":\"1203\",\"永靖\":\"1204\",\"社頭\":\"1205\",\"斗六\":\"1210\",\"南靖\":\"1218\",\"臺南\":\"1228\",\"大橋\":\"1239\",\"豐富\":\"1304\",\"烏日\":\"1320\",\"鳳山\":\"1402\",\"南州\":\"1413\",\"內獅\":\"1503\",\"吉安\":\"1602\",\"大富\":\"1613\",\"關山\":\"1626\",\"漢本\":\"1708\",\"瑞芳\":\"1804\",\"龜山\":\"1814\",\"冬山\":\"1824\",\"八斗子\":\"2003\",\"千甲\":\"2212\",\"樹調\":\"4102\",\"斗南\":\"1211\",\"新營\":\"1220\",\"保安\":\"1229\",\"嘉北\":\"1241\",\"南勢\":\"1307\",\"大慶\":\"1322\",\"九曲堂\":\"1404\",\"崁頂\":\"1412\",\"加祿\":\"1502\",\"康樂\":\"1517\",\"萬榮\":\"1611\",\"池上\":\"1624\",\"南澳\":\"1705\",\"暖暖\":\"1802\",\"大里\":\"1812\",\"中里\":\"1822\",\"平溪\":\"1907\",\"內灣\":\"2210\",\"花蓮港\":\"3202\",\"民雄\":\"1214\",\"林鳳營\":\"1222\",\"大湖\":\"1231\",\"橋頭\":\"1234\",\"南科\":\"1244\",\"泰安\":\"1314\",\"頭家厝\":\"1326\",\"麟洛\":\"1408\",\"枋寮\":\"1418\",\"瀧溪\":\"1510\",\"林榮新光\":\"1608\",\"東里\":\"1621\",\"臺東\":\"1632\",\"景美\":\"1713\",\"貢寮\":\"1809\",\"四城\":\"1819\",\"十分\":\"1904\",\"九讚頭\":\"2207\",\"龍泉\":\"2704\",\"大林\":\"1213\",\"柳營\":\"1221\",\"路竹\":\"1232\",\"新左營\":\"1242\",\"銅鑼\":\"1308\",\"太原\":\"1323\",\"六塊厝\":\"1405\",\"林邊\":\"1415\",\"枋野\":\"1505\",\"平和\":\"1605\",\"瑞穗\":\"1616\",\"瑞源\":\"1629\",\"和仁\":\"1710\",\"三貂嶺\":\"1806\",\"頭城\":\"1816\",\"蘇澳新\":\"1826\",\"上員\":\"2204\",\"六家\":\"2214\",\"沙崙\":\"5102\",\"石榴\":\"1209\",\"隆田\":\"1223\",\"岡山\":\"1233\",\"仁德\":\"1243\",\"三義\":\"1310\",\"新烏日\":\"1324\",\"屏東\":\"1406\",\"佳冬\":\"1416\",\"古莊\":\"1507\",\"壽豐\":\"1606\",\"三民\":\"1617\",\"鹿野\":\"1630\",\"崇德\":\"1711\",\"牡丹\":\"1807\",\"頂埔\":\"1817\",\"蘇澳\":\"1827\",\"竹東\":\"2205\",\"源泉\":\"2702\",\"海科館\":\"6103\",\"林內\":\"1208\",\"拔林\":\"1224\",\"楠梓\":\"1235\",\"內惟\":\"1245\",\"后里\":\"1315\",\"栗林\":\"1325\",\"歸來\":\"1407\",\"東海\":\"1417\",\"大武\":\"1508\",\"豐田\":\"1607\",\"玉里\":\"1619\",\"山里\":\"1631\",\"新城\":\"1712\",\"雙溪\":\"1808\",\"礁溪\":\"1818\",\"大華\":\"1903\",\"橫山\":\"2206\",\"濁水\":\"2703\",\"石龜\":\"1212\",\"善化\":\"1225\",\"左營\":\"1236\",\"三塊厝\":\"1247\",\"潭子\":\"1318\",\"精武\":\"1328\",\"竹田\":\"1410\",\"科工館\":\"1420\",\"太麻里\":\"1514\",\"鳳林\":\"1610\",\"富里\":\"1623\",\"東澳\":\"1704\",\"花蓮\":\"1715\",\"石城\":\"1811\",\"二結\":\"1821\",\"嶺腳\":\"1906\",\"富貴\":\"2209\",\"水里\":\"2706\",\"嘉義\":\"1215\",\"新市\":\"1226\",\"高雄\":\"1238\",\"造橋\":\"1302\",\"臺中\":\"1319\",\"五權\":\"1329\",\"潮州\":\"1411\",\"正義\":\"1421\",\"知本\":\"1516\",\"光復\":\"1612\",\"海端\":\"1625\",\"武塔\":\"1706\",\"四腳亭\":\"1803\",\"大溪\":\"1813\",\"羅東\":\"1823\",\"菁桐\":\"1908\",\"榮華\":\"2211\",\"車埕\":\"2707\",\"二水\":\"1207\",\"後壁\":\"1219\",\"中洲\":\"1230\",\"大村\":\"1240\",\"苗栗\":\"1305\",\"成功\":\"1321\",\"後庄\":\"1403\",\"鎮安\":\"1414\",\"枋山\":\"1504\",\"志學\":\"1604\",\"富源\":\"1614\",\"瑞和\":\"1628\",\"和平\":\"1709\",\"侯硐\":\"1805\",\"外澳\":\"1815\",\"新馬\":\"1825\",\"竹中\":\"2203\",\"新莊\":\"2213\",\"長榮大學\":\"5101\",\"田中\":\"1206\",\"水上\":\"1217\",\"永康\":\"1227\",\"鼓山\":\"1237\",\"美術館\":\"1246\",\"豐原\":\"1317\",\"松竹\":\"1327\",\"西勢\":\"1409\",\"民族\":\"1419\",\"金崙\":\"1512\",\"南平\":\"1609\",\"東竹\":\"1622\",\"永樂\":\"1703\",\"北埔\":\"1714\",\"福隆\":\"1810\",\"宜蘭\":\"1820\",\"望古\":\"1905\",\"合興\":\"2208\",\"集集\":\"2705\"};\r\nconst trainType = {\"1100\":\"自強\",\"1101\":\"自強\",\"1102\":\"太魯閣\",\"1103\":\"自強\",\"1106\":\"自強\",\"1107\":\"普悠瑪\",\"1108\":\"自強\",\"1109\":\"自強\",\"1110\":\"莒光\",\"1111\":\"莒光\",\"1114\":\"莒光\",\"1115\":\"莒光\",\"1120\":\"復興\",\"1131\":\"區間車\",\"1132\":\"區間快\",\"1140\":\"普快車\",\"110F\":\"自強\",\"110A\":\"自強\",\"110E\":\"自強\",\"110B\":\"自強\",\"110C\":\"自強\",\"110D\":\"自強\"}\r\nconst pad = number => number < 10 ? `0${number}` : `${number}`;\r\nconst estimatedTime = (departureTime, arrivalTime) => {\r\n  const regExp = /(\\d\\d):(\\d\\d)/;\r\n  const m1 = regExp.exec(departureTime), m2 = regExp.exec(arrivalTime);\r\n  const s1 = Number(m1[1]) * 60 + Number(m1[2]);\r\n  const s2 = Number(m2[1]) * 60 + Number(m2[2]);\r\n  const result = s2 >= s1 ? (s2 - s1) : (1440 - s1 + s2);\r\n  return `${pad(Math.trunc(result / 60))}:${pad(result % 60)}`;\r\n}\r\nconst dateString = ( t = new Date()) => {\r\n  const date = pad(t.getDate()),\r\n    month = pad(t.getMonth() + 1),\r\n    year = t.getFullYear();\r\n  return `${year}-${month}-${date}`;\r\n}\r\nconst timeString = ( t = new Date(), encode = true) =>\r\n`${pad(t.getHours())}${encode ? '%3A' : ':'}${pad(t.getMinutes())}`\r\nconst dataFilter = trains => trains.map(({ \r\n  TrainNo, EndingStationName, DepartureTime,\r\n  TrainTypeID, Direction, ScheduledDepartureTime, DelayTime,\r\n}) => ({\r\n  TrainNo, Direction, DelayTime,\r\n  EndingStationName: EndingStationName.Zh_tw || EndingStationName,\r\n  DepartureTime: DepartureTime || ScheduledDepartureTime.slice(0, -3),\r\n  TrainTypeName: trainType[TrainTypeID]\r\n}));\r\nconst routeFilter = trains => trains.map( ({\r\n  DailyTrainInfo: {\r\n    TrainNo, Direction, TrainTypeID\r\n  },\r\n  OriginStopTime: { DepartureTime },\r\n  DestinationStopTime: { ArrivalTime }\r\n}) => ({\r\n  TrainNo, Direction,\r\n  DepartureTime,\r\n  ArrivalTime,\r\n  EstimatedTime: estimatedTime(DepartureTime, ArrivalTime),\r\n  TrainTypeName: trainType[TrainTypeID]\r\n}))\r\nconst routeSorter = trains => {\r\n  const current = timeString(new Date(), false);\r\n  return trains\r\n    .filter( t => t.DepartureTime >= current )\r\n    .sort( (t1, t2) => \r\n      t1.DepartureTime > t2.DepartureTime\r\n        ? 1\r\n        : t1.DepartureTime < t2.DepartureTime ? -1 : 0\r\n    );\r\n}\r\n\r\nconst sortByDirection = trains => trains.reduce( (output, t) => {\r\n  const { Direction } = t;\r\n  output[Direction].trains.push(t);\r\n  return output;\r\n}, [{title: '順行', trains: []}, {title: '逆行', trains: []}]);\r\nconst getTrainsData = async (url, filter = dataFilter, sorter = sortByDirection) => await fetch(url)\r\n  .then( res => res.json())\r\n  .then( filter )\r\n  .then( sorter )\r\n\r\nconst getLiveBoardByStationId = async id => {\r\n  const url = `https://ptx.transportdata.tw/MOTC/v2/Rail/TRA/LiveBoard/Station/${id}?$select=TrainNo%2CEndingStationName%2CScheduledDepartureTime%2CTrainTypeID%2CDirection%2CDelayTime&$format=JSON`\r\n  const data = await getTrainsData(url)\r\n  return data;\r\n}\r\nconst getTrainsByStationId = async id => {\r\n  const t = new Date();\r\n  const current = timeString(t);\r\n  const tString = dateString(t);\r\n  const url = `https://ptx.transportdata.tw/MOTC/v2/Rail/TRA/DailyTimetable/Station/${id}/${tString}?$select=TrainNo%2CDirection%2CTrainTypeID%2CEndingStationName%2CDepartureTime&$filter=DepartureTime%20gt%20'${current}'&$orderby=DepartureTime%20asc&$format=JSON`\r\n  const data = await getTrainsData(url);\r\n  const liveBoard = await getLiveBoardByStationId(id);\r\n  const final = liveBoard.map( (d, i) => {\r\n    let { trains } = d;\r\n    if(trains.length < 1)\r\n      return data[i]\r\n    else {\r\n      const trainIdOfLast = trains[trains.length - 1].TrainNo;\r\n      const index = data[i].trains.findIndex( t => t.TrainNo === trainIdOfLast);\r\n      trains = trains.concat(index >= 0 ? data[i].trains.slice(index + 1) : data[i].trains);\r\n      return {title: d.title, trains};\r\n    }\r\n  })\r\n  return final;\r\n}\r\nconst getTrainsByRouteName = async (start, destination) => {\r\n  const startId = ids[start], destinationId = ids[destination];\r\n  const date = dateString();\r\n  const url = `https://ptx.transportdata.tw/MOTC/v2/Rail/TRA/DailyTimetable/OD/${startId}/to/${destinationId}/${date}?$select=DailyTrainInfo%2COriginStopTime%2CDestinationStopTime&$format=JSON`\r\n  const data = await getTrainsData(url, routeFilter, trains => ([{\r\n    title: `往 ${destination}`,\r\n    trains: routeSorter(trains)\r\n  }]));\r\n  return data;\r\n}\r\n\r\nconst getTrainsByStationName = name => getTrainsByStationId(ids[name]);\r\n\r\nexport default {\r\n  getTrainsByStationId,\r\n  getTrainsByStationName,\r\n  getTrainsByRouteName,\r\n};","import React from 'react';\r\n\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Button from '@material-ui/core/Button';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport OutlinedInput from '@material-ui/core/OutlinedInput';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport Swap from '@material-ui/icons/SwapHoriz';\r\n\r\nconst styles = ({\r\n  formControl: {\r\n    minWidth: '100px'\r\n  },\r\n  container: {\r\n    padding: '12px 0px',\r\n    display: 'flex',\r\n    justifyContent: 'space-evenly',\r\n    marginBottom: '8px'\r\n  },\r\n  button: {\r\n    alignSelf: 'center',\r\n    fontSize: '50px',\r\n    padding: '0 10px'\r\n  }\r\n})\r\n\r\nconst stations = [\r\n  \"新左營\", \"左營\", \"內惟\", \"美術館\", \"鼓山\", \"三塊厝\",\r\n  \"高雄\", \"民族\", \"科工館\", \"正義\", \"鳳山\", '臺南'\r\n]\r\n\r\nconst RouteSelector = props => {\r\n\r\n    const {\r\n      classes,\r\n      start, destination,\r\n      onChange, onSwap\r\n    } = props;\r\n\r\n    return <Paper elevation={1} className={classes.container}>\r\n      <FormControl variant=\"outlined\" className={classes.formControl}>\r\n          <InputLabel\r\n            htmlFor=\"start\"\r\n          >\r\n            起站\r\n          </InputLabel>\r\n          <Select\r\n            value={start}\r\n            onChange={onChange}\r\n            input={\r\n              <OutlinedInput\r\n                labelWidth={30}\r\n                name=\"start\"\r\n                id=\"start\"\r\n              />\r\n            }\r\n          >\r\n          { stations.map( (s, i) => s !== destination && <MenuItem key={i} value={s}>\r\n            {s}\r\n          </MenuItem>) }\r\n          </Select>\r\n        </FormControl>\r\n\r\n        <Button onClick={onSwap} className={classes.button}>\r\n          <Swap fontSize='large' />\r\n        </Button>\r\n\r\n        <FormControl variant=\"outlined\" className={classes.formControl}>\r\n          <InputLabel\r\n            htmlFor=\"destination\"\r\n          >\r\n            迄站\r\n          </InputLabel>\r\n          <Select\r\n            value={destination}\r\n            onChange={onChange}\r\n            input={\r\n              <OutlinedInput\r\n                labelWidth={30}\r\n                name=\"destination\"\r\n                id=\"destination\"\r\n              />\r\n            }\r\n          >\r\n            <MenuItem value=\"\">\r\n              <em>無</em>\r\n            </MenuItem>\r\n            { stations.map( (s, i) => s !== start && <MenuItem key={i} value={s}>\r\n              {s}\r\n            </MenuItem>) }\r\n          </Select>\r\n        </FormControl>\r\n    </Paper>\r\n}\r\n\r\nexport default withStyles(styles)(RouteSelector);","import React,{ Component } from 'react';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\n\r\nimport ExpandIcon from '@material-ui/icons/ExpandMore';\r\nimport FoldIcon from '@material-ui/icons/ExpandLess';\r\n\r\nconst styles = ({\r\n  constainer: {\r\n    backgroundColor: '#eaeaea',\r\n    padding: '5px'\r\n  },\r\n  trains: {\r\n    listStyle: 'none',\r\n    padding: 0,\r\n    margin: 0,\r\n    '& li': {\r\n      display: 'grid',\r\n      gridTemplateColumns: '40px 60px 1fr 50px 60px',\r\n      height: '30px'\r\n    },\r\n    '& li.title': {\r\n      borderBottom: '1px solid gray',\r\n      height: 'auto',\r\n      paddingBottom: '5px',\r\n      marginBottom: '5px',\r\n    },\r\n    '& li.folded': {\r\n      display: 'none',\r\n    },\r\n    '& div': {\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      justifyContent: 'flex-end'\r\n    },\r\n    '& div.center': {\r\n      justifyContent: 'space-evenly'\r\n    },\r\n    '& div.left': {\r\n      justifyContent: 'flex-start'\r\n    },\r\n    '& .clickable': {\r\n      cursor: 'pointer'\r\n    },\r\n    '& button': {\r\n      padding: 0,\r\n      minWidth: 'auto'\r\n    }\r\n  }\r\n})\r\nconst sort = function(){\r\n  const trainTypeValue = ({\r\n    \"自強\": 2, \"太魯閣\": 1, \"普悠瑪\": 0,\r\n    \"莒光\": 3, \"復興\": 4, \"區間快\": 5, \"區間車\": 6, \"普快車\": 7\r\n  })\r\n  const sortByTrainType = (t1, t2) => \r\n    trainTypeValue[t1.TrainTypeName] - trainTypeValue[t2.TrainTypeName]\r\n  const sortByDepartureTime = (t1, t2) => \r\n    t1.DepartureTime > t2.DepartureTime\r\n      ? 1\r\n      : t1.DepartureTime < t2.DepartureTime ? -1 : 0;\r\n  return {\r\n    TrainTypeName: sortByTrainType,\r\n    DepartureTime: sortByDepartureTime\r\n  }\r\n}();\r\n \r\nclass TrainInfo extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    const { trains } = this.props;\r\n    this.state = {\r\n      folded: true,\r\n      hasMore:　trains.length > 3,\r\n      sortBy: 'DepartureTime'\r\n    }\r\n  }\r\n\r\n  handleExpand = () =>\r\n    this.setState(({folded}) => ({folded: !folded}));\r\n  \r\n  handleSort = (sortBy) => () => this.setState({sortBy})\r\n  \r\n  render() {\r\n    const { folded, hasMore, sortBy } = this.state;\r\n    const { classes, title, trains, destination } = this.props;\r\n    const { handleExpand, handleSort } = this;\r\n    sort[sortBy] && trains.sort(sort[sortBy]);\r\n    const length = destination ? 7 : 2;\r\n    return <div className={classes.constainer}>\r\n      <Typography variant=\"h6\" gutterBottom align='left'>\r\n        {title}\r\n      </Typography>\r\n      <ul className={classes.trains}>\r\n        <li className='title'>\r\n          <div className='center'>車次</div>\r\n          <div>\r\n            <span\r\n              className='clickable'\r\n              onClick={handleSort('TrainTypeName')}\r\n            >車種</span>\r\n          </div>\r\n          <div className='center'>\r\n            <span\r\n              onClick={handleSort('DepartureTime')}\r\n              className='clickable'\r\n            >開車</span>\r\n            { destination && <span>抵達</span> }\r\n          </div>\r\n          <div className='left'>{destination ? \"耗時\" : \"終點\"}</div>\r\n          <div className='center'>誤點</div>\r\n        </li>\r\n        { trains.map( (t, i) =><li\r\n          key={i}\r\n          className={ (i > length && folded) ? 'folded' : undefined }\r\n        >\r\n          <Button>{t.TrainNo}</Button>\r\n          <div>{t.TrainTypeName}</div>\r\n          <div className='center'>\r\n            <span>{t.DepartureTime}</span>\r\n            { destination && <span>{t.ArrivalTime}</span> }\r\n          </div>\r\n          <div className='left'>\r\n            { destination ? t.EstimatedTime : t.EndingStationName }\r\n          </div>\r\n          <div className='center'>{\r\n            isNaN(t.DelayTime)\r\n            ? undefined\r\n            : t.DelayTime === 0 ? '準點' : `${t.DelayTime}分`\r\n          }</div>\r\n        </li>) }\r\n      </ul>\r\n      { hasMore && <Button onClick={handleExpand} className={classes.button}>\r\n          { folded ? \"更多\" : \"摺疊\" }\r\n          { folded ? <ExpandIcon /> : <FoldIcon /> }\r\n      </Button> }\r\n    </div>\r\n  }\r\n}\r\n\r\n\r\nexport default withStyles(styles)(TrainInfo);","import React, { Component } from 'react';\r\nimport TrainInfo from './TrainInfo';\r\n\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nconst styles = ({\r\n  container: {\r\n    padding: '7px'\r\n  },\r\n  loadingHolder: {\r\n    height: '288px',\r\n    backgroundColor: '#eaeaea',\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    alignItems: 'center'\r\n  }\r\n})\r\n\r\nclass StationInfo extends Component {\r\n\r\n\r\n  render() {\r\n    const { classes, routes, start, destination, loading } = this.props;\r\n\r\n    return <Paper elevation={1} className={classes.container}>\r\n      <Typography variant=\"h5\" gutterBottom align='left'>\r\n        { `從 ${start} 出發` }\r\n      </Typography>\r\n      { loading\r\n        ? <div className={classes.loadingHolder}>Loading...</div>\r\n        : routes.map( ({title, trains}) =>\r\n        <TrainInfo\r\n          key={`${start}#${title}`}\r\n          title={title}\r\n          trains={trains}\r\n          destination={destination}\r\n        />)\r\n      }\r\n    </Paper>\r\n  }\r\n}\r\n\r\n\r\nexport default withStyles(styles)(StationInfo);","import React, { Component } from 'react';\nimport './App.css';\nimport TRAApi from './TRAApi';\n\nimport RouteSelector from './components/RouteSelector';\nimport StationInfo from './components/StationInfo';\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      start: '高雄',\n      destination: '',\n      routes: [],\n      loading: false\n    }\n  }\n\n  componentDidMount = async () => {\n    this.handleStationDataLoad();\n  }\n\n  handleSwap = () => {\n    const { start, destination } = this.state;\n    destination\n    && this.setState(\n      {start: destination, destination: start, loading: true},\n      this.handleStationDataLoad\n    );\n  }\n\n  handleSelectorChange = ({target: {name, value}}) =>\n    this.setState(\n      {[name]: value, loading: true},\n      this.handleStationDataLoad\n    );\n\n  handleStationDataLoad = async () => {\n    const { start, destination } = this.state;\n    const routes = destination\n      ? await TRAApi.getTrainsByRouteName(start, destination)\n      : await TRAApi.getTrainsByStationName(start);\n    this.setState({routes, loading: false});\n  }\n\n  render() {\n    const { start, destination, routes, loading } = this.state;\n    const { handleSelectorChange, handleSwap } = this;\n    return (\n      <div className=\"App\">\n        <RouteSelector\n          start={start} destination={destination}\n          onChange={handleSelectorChange}\n          onSwap={handleSwap}\n        />\n        <StationInfo\n          loading={loading}\n          start={start} destination={destination}\n          routes={routes}\n        />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}