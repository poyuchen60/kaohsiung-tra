(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{111:function(e,t,n){e.exports=n(249)},116:function(e,t,n){},119:function(e,t,n){},249:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(16),o=n.n(i),c=(n(116),n(37)),l=n(15),s=n.n(l),u=n(18),m=n(19),d=n(20),p=n(22),f=n(21),h=n(23),T=(n(119),n(100)),v={"\u57fa\u9686":"1001","\u516b\u5835":"1002","\u4e03\u5835":"1003","\u4e94\u5835":"1004","\u6c50\u6b62":"1005","\u5357\u6e2f":"1006","\u677e\u5c71":"1007","\u842c\u83ef":"1009","\u81fa\u5317":"1008","\u677f\u6a4b":"1011","\u5c71\u4f73":"1013","\u6a39\u6797":"1012","\u9daf\u6b4c":"1014","\u6843\u5712":"1015","\u5167\u58e2":"1016","\u4e2d\u58e2":"1017","\u57d4\u5fc3":"1018","\u694a\u6885":"1019","\u5bcc\u5ca1":"1020","\u6e56\u53e3":"1021","\u65b0\u8c50":"1022","\u7af9\u5317":"1023","\u5317\u65b0\u7af9":"1024","\u65b0\u7af9":"1025","\u9999\u5c71":"1026","\u5d0e\u9802":"1027","\u7af9\u5357":"1028","\u4e09\u5751":"1029","\u767e\u798f":"1030","\u6c50\u79d1":"1031","\u6d6e\u6d32":"1032","\u5317\u6e56":"1033","\u5357\u6a39\u6797":"1034","\u4e09\u59d3\u6a4b":"1035","\u65b0\u5bcc":"1036","\u8ac7\u6587":"1102","\u5927\u5c71":"1104","\u5f8c\u9f8d":"1105","\u9f8d\u6e2f":"1106","\u65b0\u57d4":"1108","\u767d\u6c99\u5c6f":"1107","\u901a\u9704":"1109","\u82d1\u88e1":"1110","\u65e5\u5357":"1111","\u5927\u7532":"1112","\u81fa\u4e2d\u6e2f":"1113","\u6e05\u6c34":"1114","\u6c99\u9e7f":"1115","\u9f8d\u4e95":"1116","\u5927\u809a":"1117","\u8ffd\u5206":"1118","\u5f70\u5316":"1120","\u82b1\u58c7":"1202","\u54e1\u6797":"1203","\u6c38\u9756":"1204","\u793e\u982d":"1205","\u6597\u516d":"1210","\u5357\u9756":"1218","\u81fa\u5357":"1228","\u5927\u6a4b":"1239","\u8c50\u5bcc":"1304","\u70cf\u65e5":"1320","\u9cf3\u5c71":"1402","\u5357\u5dde":"1413","\u5167\u7345":"1503","\u5409\u5b89":"1602","\u5927\u5bcc":"1613","\u95dc\u5c71":"1626","\u6f22\u672c":"1708","\u745e\u82b3":"1804","\u9f9c\u5c71":"1814","\u51ac\u5c71":"1824","\u516b\u6597\u5b50":"2003","\u5343\u7532":"2212","\u6a39\u8abf":"4102","\u6597\u5357":"1211","\u65b0\u71df":"1220","\u4fdd\u5b89":"1229","\u5609\u5317":"1241","\u5357\u52e2":"1307","\u5927\u6176":"1322","\u4e5d\u66f2\u5802":"1404","\u5d01\u9802":"1412","\u52a0\u797f":"1502","\u5eb7\u6a02":"1517","\u842c\u69ae":"1611","\u6c60\u4e0a":"1624","\u5357\u6fb3":"1705","\u6696\u6696":"1802","\u5927\u91cc":"1812","\u4e2d\u91cc":"1822","\u5e73\u6eaa":"1907","\u5167\u7063":"2210","\u82b1\u84ee\u6e2f":"3202","\u6c11\u96c4":"1214","\u6797\u9cf3\u71df":"1222","\u5927\u6e56":"1231","\u6a4b\u982d":"1234","\u5357\u79d1":"1244","\u6cf0\u5b89":"1314","\u982d\u5bb6\u539d":"1326","\u9e9f\u6d1b":"1408","\u678b\u5bee":"1418","\u7027\u6eaa":"1510","\u6797\u69ae\u65b0\u5149":"1608","\u6771\u91cc":"1621","\u81fa\u6771":"1632","\u666f\u7f8e":"1713","\u8ca2\u5bee":"1809","\u56db\u57ce":"1819","\u5341\u5206":"1904","\u4e5d\u8b9a\u982d":"2207","\u9f8d\u6cc9":"2704","\u5927\u6797":"1213","\u67f3\u71df":"1221","\u8def\u7af9":"1232","\u65b0\u5de6\u71df":"1242","\u9285\u947c":"1308","\u592a\u539f":"1323","\u516d\u584a\u539d":"1405","\u6797\u908a":"1415","\u678b\u91ce":"1505","\u5e73\u548c":"1605","\u745e\u7a57":"1616","\u745e\u6e90":"1629","\u548c\u4ec1":"1710","\u4e09\u8c82\u5dba":"1806","\u982d\u57ce":"1816","\u8607\u6fb3\u65b0":"1826","\u4e0a\u54e1":"2204","\u516d\u5bb6":"2214","\u6c99\u5d19":"5102","\u77f3\u69b4":"1209","\u9686\u7530":"1223","\u5ca1\u5c71":"1233","\u4ec1\u5fb7":"1243","\u4e09\u7fa9":"1310","\u65b0\u70cf\u65e5":"1324","\u5c4f\u6771":"1406","\u4f73\u51ac":"1416","\u53e4\u838a":"1507","\u58fd\u8c50":"1606","\u4e09\u6c11":"1617","\u9e7f\u91ce":"1630","\u5d07\u5fb7":"1711","\u7261\u4e39":"1807","\u9802\u57d4":"1817","\u8607\u6fb3":"1827","\u7af9\u6771":"2205","\u6e90\u6cc9":"2702","\u6d77\u79d1\u9928":"6103","\u6797\u5167":"1208","\u62d4\u6797":"1224","\u6960\u6893":"1235","\u5167\u60df":"1245","\u540e\u91cc":"1315","\u6817\u6797":"1325","\u6b78\u4f86":"1407","\u6771\u6d77":"1417","\u5927\u6b66":"1508","\u8c50\u7530":"1607","\u7389\u91cc":"1619","\u5c71\u91cc":"1631","\u65b0\u57ce":"1712","\u96d9\u6eaa":"1808","\u7901\u6eaa":"1818","\u5927\u83ef":"1903","\u6a6b\u5c71":"2206","\u6fc1\u6c34":"2703","\u77f3\u9f9c":"1212","\u5584\u5316":"1225","\u5de6\u71df":"1236","\u4e09\u584a\u539d":"1247","\u6f6d\u5b50":"1318","\u7cbe\u6b66":"1328","\u7af9\u7530":"1410","\u79d1\u5de5\u9928":"1420","\u592a\u9ebb\u91cc":"1514","\u9cf3\u6797":"1610","\u5bcc\u91cc":"1623","\u6771\u6fb3":"1704","\u82b1\u84ee":"1715","\u77f3\u57ce":"1811","\u4e8c\u7d50":"1821","\u5dba\u8173":"1906","\u5bcc\u8cb4":"2209","\u6c34\u91cc":"2706","\u5609\u7fa9":"1215","\u65b0\u5e02":"1226","\u9ad8\u96c4":"1238","\u9020\u6a4b":"1302","\u81fa\u4e2d":"1319","\u4e94\u6b0a":"1329","\u6f6e\u5dde":"1411","\u6b63\u7fa9":"1421","\u77e5\u672c":"1516","\u5149\u5fa9":"1612","\u6d77\u7aef":"1625","\u6b66\u5854":"1706","\u56db\u8173\u4ead":"1803","\u5927\u6eaa":"1813","\u7f85\u6771":"1823","\u83c1\u6850":"1908","\u69ae\u83ef":"2211","\u8eca\u57d5":"2707","\u4e8c\u6c34":"1207","\u5f8c\u58c1":"1219","\u4e2d\u6d32":"1230","\u5927\u6751":"1240","\u82d7\u6817":"1305","\u6210\u529f":"1321","\u5f8c\u5e84":"1403","\u93ae\u5b89":"1414","\u678b\u5c71":"1504","\u5fd7\u5b78":"1604","\u5bcc\u6e90":"1614","\u745e\u548c":"1628","\u548c\u5e73":"1709","\u4faf\u7850":"1805","\u5916\u6fb3":"1815","\u65b0\u99ac":"1825","\u7af9\u4e2d":"2203","\u65b0\u838a":"2213","\u9577\u69ae\u5927\u5b78":"5101","\u7530\u4e2d":"1206","\u6c34\u4e0a":"1217","\u6c38\u5eb7":"1227","\u9f13\u5c71":"1237","\u7f8e\u8853\u9928":"1246","\u8c50\u539f":"1317","\u677e\u7af9":"1327","\u897f\u52e2":"1409","\u6c11\u65cf":"1419","\u91d1\u5d19":"1512","\u5357\u5e73":"1609","\u6771\u7af9":"1622","\u6c38\u6a02":"1703","\u5317\u57d4":"1714","\u798f\u9686":"1810","\u5b9c\u862d":"1820","\u671b\u53e4":"1905","\u5408\u8208":"2208","\u96c6\u96c6":"2705"},g={1100:"\u81ea\u5f37",1101:"\u81ea\u5f37",1102:"\u592a\u9b6f\u95a3",1103:"\u81ea\u5f37",1106:"\u81ea\u5f37",1107:"\u666e\u60a0\u746a",1108:"\u81ea\u5f37",1109:"\u81ea\u5f37",1110:"\u8392\u5149",1111:"\u8392\u5149",1114:"\u8392\u5149",1115:"\u8392\u5149",1120:"\u5fa9\u8208",1131:"\u5340\u9593\u8eca",1132:"\u5340\u9593\u5feb",1140:"\u666e\u5feb\u8eca","110F":"\u81ea\u5f37","110A":"\u81ea\u5f37","110E":"\u81ea\u5f37","110B":"\u81ea\u5f37","110C":"\u81ea\u5f37","110D":"\u81ea\u5f37"},y={0:"\u4e0d\u7d93\u5c71\u6d77\u7dda",1:"\u5c71\u7dda",2:"\u6d77\u7dda"},N=function(e){return e<10?"0".concat(e):"".concat(e)},E=function(e,t){var n=/(\d\d):(\d\d)/,a=n.exec(e),r=n.exec(t),i=60*Number(a[1])+Number(a[2]),o=60*Number(r[1])+Number(r[2]),c=o>=i?o-i:1440-i+o;return"".concat(N(Math.trunc(c/60)),":").concat(N(c%60))},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=N(e.getDate()),n=N(e.getMonth()+1),a=e.getFullYear();return"".concat(a,"-").concat(n,"-").concat(t)},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return"".concat(N(e.getHours())).concat(t?"%3A":":").concat(N(e.getMinutes()))},S=function(e){return e.map(function(e){var t=e.TrainNo,n=e.EndingStationName,a=e.DepartureTime,r=e.TrainTypeID,i=e.Direction,o=e.ScheduledDepartureTime;return{TrainNo:t,Direction:i,DelayTime:e.DelayTime,EndingStationName:n.Zh_tw||n,DepartureTime:a||o.slice(0,-3),TrainTypeName:g[r]}})},O=function(e){return e.map(function(e){var t=e.DailyTrainInfo,n=t.TrainNo,a=t.Direction,r=t.TrainTypeID,i=e.OriginStopTime.DepartureTime,o=e.DestinationStopTime.ArrivalTime;return{TrainNo:n,Direction:a,DepartureTime:i,ArrivalTime:o,EstimatedTime:E(i,o),TrainTypeName:g[r]}})},w=function(e,t){var n=b(new Date,!1),a=t.reduce(function(e,t){return e[t.TrainNo]=t,e},Object.create(null));return e.forEach(function(e){var t=a[e.TrainNo];t&&(e.DelayTime=t.DelayTime)}),e.filter(function(e){return e.DepartureTime>=n||e.DelayTime>=0}).sort(function(e,t){return e.DepartureTime>t.DepartureTime?1:e.DepartureTime<t.DepartureTime?-1:0})},x=function(e){return e.reduce(function(e,t){return e[t.Direction].trains.push(t),e},[{title:"\u9806\u884c",trains:[]},{title:"\u9006\u884c",trains:[]}])},C=function(){var e=Object(u.a)(s.a.mark(function e(t){var n,a,r,i=arguments;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:S,a=i.length>2&&void 0!==i[2]?i[2]:x,r=fetch(t).then(function(e){return e.json()}),n&&(r=r.then(n)),a&&(r=r.then(a)),e.next=7,r;case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(u.a)(s.a.mark(function e(t){var n,a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="https://ptx.transportdata.tw/MOTC/v2/Rail/TRA/LiveBoard/Station/".concat(t,"?$select=TrainNo%2CEndingStationName%2CScheduledDepartureTime%2CTrainTypeID%2CDirection%2CDelayTime&$format=JSON"),e.next=3,C(n);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(u.a)(s.a.mark(function e(t){var n,a,r,i,o,c,l;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Date,a=b(n),r=D(n),i="https://ptx.transportdata.tw/MOTC/v2/Rail/TRA/DailyTimetable/Station/".concat(t,"/").concat(r,"?$select=TrainNo%2CDirection%2CTrainTypeID%2CEndingStationName%2CDepartureTime&$filter=DepartureTime%20gt%20'").concat(a,"'&$orderby=DepartureTime%20asc&$format=JSON"),e.next=6,C(i);case 6:return o=e.sent,e.next=9,j(t);case 9:return c=e.sent,l=c.map(function(e,t){var n=e.trains,a=e.title,r=o[t].trains;if(n.length<1)return o[t];var i=Object.create(null);return n.forEach(function(e){return i[e.TrainNo]=e}),r=r.map(function(e){var t=i[e.TrainNo];return t&&delete i[e.TrainNo],t||e}),{title:a,trains:n.filter(function(e){return i[e.TrainNo]}).concat(r)}}),e.abrupt("return",l);case 12:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),I=function(e){var t=e.DailyTrainInfo,n=t.TrainNo,a=t.Direction,r=t.StartingStationName,i=t.EndingStationName,o=t.TrainTypeID,c=t.TripLine,l=t.WheelchairFlag,s=t.BreastFeedingFlag,u=t.DailyFlag,m=t.Note,d=e.StopTimes;return d=d.map(function(e){var t=e.StationName,n=e.ArrivalTime,a=e.DepartureTime;return{StationName:t.Zh_tw,ArrivalTime:n,DepartureTime:a}}),{TrainNo:n,Direction:a,TrainTypeName:g[o],StartingStationName:r.Zh_tw,EndingStationName:i.Zh_tw,TripLine:y[c],WheelchairFlag:!!l,BreastFeedingFlag:!!s,DailyFlag:!!u,Note:m&&m.Zh_tw||"",StopTimes:d}},B=function(e){var t=e.StationName;return{DelayTime:e.DelayTime,LastStationName:t&&t.Zh_tw}},A={getTrainsByStationId:k,getTrainsByStationName:function(e){return k(v[e])},getTrainsByRouteName:function(){var e=Object(u.a)(s.a.mark(function e(t,n){var a,r,i,o,c,l,u;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=v[t],r=v[n],i=D(),o="https://ptx.transportdata.tw/MOTC/v2/Rail/TRA/DailyTimetable/OD/".concat(a,"/to/").concat(r,"/").concat(i,"?$select=DailyTrainInfo%2COriginStopTime%2CDestinationStopTime&$format=JSON"),e.next=5,j(a);case 5:return c=e.sent,l=c[0].trains.concat(c[1].trains),e.next=9,C(o,O,function(e){return[{title:"\u5f80 ".concat(n),trains:w(e,l)}]});case 9:return u=e.sent,e.abrupt("return",u);case 11:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),getTrainDetailById:function(){var e=Object(u.a)(s.a.mark(function e(t){var n,a,r,i,o=arguments;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:new Date,a="https://ptx.transportdata.tw/MOTC/v2/Rail/TRA/DailyTimetable/TrainNo/".concat(t,"/TrainDate/").concat(D(n),"?$select=DailyTrainInfo%2CStopTimes&$format=JSON"),r="https://ptx.transportdata.tw/MOTC/v2/Rail/TRA/LiveTrainDelay?$select=StationName%2CDelayTime&$filter=TrainNo%20eq%20'".concat(t,"'&$format=JSON"),e.next=5,Promise.all([C(a,function(e){return e[0]},I),C(r,function(e){return e[0]||{}},B)]);case 5:return i=e.sent,e.abrupt("return",Object(T.a)({},i[0],i[1]));case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},F=n(33),L=n.n(F),R=n(27),$=n.n(R),M=n(44),W=n.n(M),U=n(57),J=n.n(U),Z=n(59),_=n.n(Z),H=n(58),z=n.n(H),q=n(60),P=n.n(q),Y=n(17),G=n(102),K=n.n(G),Q=["\u65b0\u5de6\u71df","\u5de6\u71df","\u5167\u60df","\u7f8e\u8853\u9928","\u9f13\u5c71","\u4e09\u584a\u539d","\u9ad8\u96c4","\u6c11\u65cf","\u79d1\u5de5\u9928","\u6b63\u7fa9","\u9cf3\u5c71","\u81fa\u5357"],V=Object(Y.withStyles)({formControl:{minWidth:"100px"},container:{padding:"12px 0px",display:"flex",justifyContent:"space-evenly",marginBottom:"8px"},button:{alignSelf:"center",fontSize:"50px",padding:"0 10px"}})(function(e){var t=e.classes,n=e.start,a=e.destination,i=e.onChange,o=e.onSwap;return r.a.createElement(L.a,{elevation:1,className:t.container},r.a.createElement(J.a,{variant:"outlined",className:t.formControl},r.a.createElement(z.a,{htmlFor:"start"},"\u8d77\u7ad9"),r.a.createElement(_.a,{value:n,onChange:i,input:r.a.createElement(P.a,{labelWidth:30,name:"start",id:"start"})},Q.map(function(e,t){return e!==a&&r.a.createElement(W.a,{key:t,value:e},e)}))),r.a.createElement($.a,{onClick:o,className:t.button},r.a.createElement(K.a,{fontSize:"large"})),r.a.createElement(J.a,{variant:"outlined",className:t.formControl},r.a.createElement(z.a,{htmlFor:"destination"},"\u8fc4\u7ad9"),r.a.createElement(_.a,{value:a,onChange:i,input:r.a.createElement(P.a,{labelWidth:30,name:"destination",id:"destination"})},r.a.createElement(W.a,{value:""},r.a.createElement("em",null,"\u7121")),Q.map(function(e,t){return e!==n&&r.a.createElement(W.a,{key:t,value:e},e)}))))}),X=n(26),ee=n.n(X),te=n(103),ne=n.n(te),ae=n(104),re=n.n(ae),ie=function(){var e={"\u81ea\u5f37":2,"\u592a\u9b6f\u95a3":1,"\u666e\u60a0\u746a":0,"\u8392\u5149":3,"\u5fa9\u8208":4,"\u5340\u9593\u5feb":5,"\u5340\u9593\u8eca":6,"\u666e\u5feb\u8eca":7};return{TrainTypeName:function(t,n){return e[t.TrainTypeName]-e[n.TrainTypeName]},DepartureTime:function(e,t){return e.DepartureTime>t.DepartureTime?1:e.DepartureTime<t.DepartureTime?-1:0}}}(),oe=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(p.a)(this,Object(f.a)(t).call(this,e))).shouldComponentUpdate=function(e){return!(n.props.destination!==e.destination)},n.handleExpand=function(){return n.setState(function(e){return{folded:!e.folded}})},n.handleSort=function(e){return function(){return n.setState({sortBy:e})}},n.state={folded:!0,sortBy:"DepartureTime"},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.state,t=e.folded,n=e.sortBy,a=this.props,i=a.classes,o=a.title,c=a.trains,l=a.destination,s=a.onOpenTrainInfo,u=this.handleExpand,m=this.handleSort;ie[n]&&c.sort(ie[n]);var d=l?7:2,p=c.length>d;return r.a.createElement("div",{className:i.constainer},r.a.createElement(ee.a,{variant:"h6",gutterBottom:!0,align:"left"},o),r.a.createElement("ul",{className:i.trains},r.a.createElement("li",{className:"title"},r.a.createElement("div",{className:"center"},"\u8eca\u6b21"),r.a.createElement("div",null,r.a.createElement("span",{className:"clickable",onClick:m("TrainTypeName")},"\u8eca\u7a2e")),r.a.createElement("div",{className:"center"},r.a.createElement("span",{onClick:m("DepartureTime"),className:"clickable"},"\u958b\u8eca"),l&&r.a.createElement("span",null,"\u62b5\u9054")),r.a.createElement("div",{className:"left"},l?"\u8017\u6642":"\u7d42\u9ede"),r.a.createElement("div",{className:"center"},"\u8aa4\u9ede")),c.map(function(e,n){return r.a.createElement("li",{key:n,className:n>d&&t?"folded":void 0},r.a.createElement($.a,{onClick:s({TrainNo:e.TrainNo,Direction:e.Direction,TrainTypeName:e.TrainTypeName,Date:new Date})},e.TrainNo),r.a.createElement("div",null,e.TrainTypeName),r.a.createElement("div",{className:"center"},r.a.createElement("span",null,e.DepartureTime),l&&r.a.createElement("span",null,e.ArrivalTime)),r.a.createElement("div",{className:"left"},l?e.EstimatedTime:e.EndingStationName),r.a.createElement("div",{className:"center"},isNaN(e.DelayTime)?void 0:0===e.DelayTime?"\u6e96\u9ede":"".concat(e.DelayTime,"\u5206")))})),p&&r.a.createElement($.a,{onClick:u,className:i.button},t?"\u66f4\u591a":"\u647a\u758a",t?r.a.createElement(ne.a,null):r.a.createElement(re.a,null)))}}]),t}(a.Component),ce=Object(Y.withStyles)({constainer:{backgroundColor:"#eaeaea",padding:"5px"},trains:{listStyle:"none",padding:0,margin:0,"& li":{display:"grid",gridTemplateColumns:"40px 60px 1fr 50px 60px",height:"30px"},"& li.title":{borderBottom:"1px solid gray",height:"auto",paddingBottom:"5px",marginBottom:"5px"},"& li.folded":{display:"none"},"& div":{display:"flex",alignItems:"center",justifyContent:"flex-end"},"& div.center":{justifyContent:"space-evenly"},"& div.left":{justifyContent:"flex-start"},"& .clickable":{cursor:"pointer"},"& button":{padding:0,minWidth:"auto"}}})(oe),le=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(p.a)(this,Object(f.a)(t).call(this,e))).componentDidMount=function(){n.timer=setInterval(n.handleCountdown,1e3)},n.componentWillUnmount=function(){clearInterval(n.timer)},n.handleCountdown=function(){var e=n.state.counter;n.props.loading||0===e?n.handleUpdateAndReset():n.setState({counter:e-1})},n.handleUpdateAndReset=function(){var e=n.props.onClick;n.setState({counter:30},e)},n.timer=void 0,n.state={counter:30},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.classes,t=this.handleUpdateAndReset,n=this.state.counter;return r.a.createElement($.a,{onClick:t},"\u66f4\u65b0",r.a.createElement("span",{className:e.secend},n))}}]),t}(a.Component),se=Object(Y.withStyles)({secend:{color:"#d0d0d0",marginLeft:"5px",paddingTop:"2px",width:"16px"}})(le),ue=function(e){function t(){return Object(m.a)(this,t),Object(p.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.routes,a=e.start,i=e.destination,o=e.loading,c=e.onOpenTrainInfo,l=e.onUpdate;return r.a.createElement(L.a,{elevation:1,className:t.container},r.a.createElement("div",{className:t.header},r.a.createElement(ee.a,{variant:"h5",align:"left"},"\u5f9e ".concat(a," \u51fa\u767c")),r.a.createElement(se,{loading:o,key:"".concat(a,"&").concat(i),onClick:l})),r.a.createElement("div",{className:t.main},o&&r.a.createElement("div",{className:t.loadingHolder},"Loading..."),n.map(function(e){var t=e.title,n=e.trains;return r.a.createElement(ce,{key:"".concat(a,"#").concat(t),title:t,trains:n,destination:i||"",onOpenTrainInfo:c})})))}}]),t}(a.Component),me=Object(Y.withStyles)({container:{padding:"7px"},main:{position:"relative"},loadingHolder:{position:"absolute",top:0,left:0,height:"100%",width:"100%",backgroundColor:"rgba(234,234,234,0.7)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:5},header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"5px"}})(ue),de=n(109),pe=n.n(de),fe=n(105),he=n.n(fe),Te=n(107),ve=n.n(Te),ge=n(106),ye=n.n(ge),Ne=n(108),Ee=n.n(Ne),De=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(p.a)(this,Object(f.a)(t).call(this,e))).componentDidMount=Object(u.a)(s.a.mark(function e(){var t,a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.id,e.next=3,A.getTrainDetailById(t);case 3:a=e.sent,n.setState({loading:!1,train:a});case 5:case"end":return e.stop()}},e)})),n.state={loading:!0,train:{}},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.id,a=this.state,i=a.train,o=i.StartingStationName,c=i.EndingStationName,l=i.WheelchairFlag,s=i.BreastFeedingFlag,u=i.DailyFlag,m=(i.TripLine,i.Note,i.StopTimes),d=i.DelayTime,p=i.LastStationName,f=a.loading,h=p?m.findIndex(function(e){return e.StationName===p}):-2;return console.log(h,m,p),r.a.createElement(r.a.Fragment,null,f&&r.a.createElement("div",{className:t.loadingHolder},"Loading"),r.a.createElement(he.a,{id:"train-info-title"},r.a.createElement("div",null,"".concat(n)),!f&&r.a.createElement("div",{className:t.header},r.a.createElement(ee.a,{variant:"h6",gutterBottom:!0},"".concat(o,"  >>  ").concat(c)),r.a.createElement("div",null,u&&r.a.createElement(ye.a,null),l&&r.a.createElement(ve.a,null),s&&r.a.createElement(Ee.a,null)))),r.a.createElement(pe.a,{className:t.container},!f&&r.a.createElement("ul",{className:t.stations},r.a.createElement("li",{className:"title"},r.a.createElement("div",null,"\u7ad9\u540d"),r.a.createElement("div",null,"\u5230\u7ad9"),r.a.createElement("div",null,"\u96e2\u7ad9"),r.a.createElement("div",null,"\u72c0\u614b")),m.map(function(e,t){return r.a.createElement("li",{key:t},r.a.createElement("div",null,e.StationName),r.a.createElement("div",null,e.ArrivalTime),r.a.createElement("div",null,e.DepartureTime),r.a.createElement("div",null,t<=h?"\u5df2\u904e\u7ad9":t===h+1?0===d?"\u6e96\u9ede":"\u665a".concat(d,"\u5206"):""))}))))}}]),t}(a.Component),be=Object(Y.withStyles)({container:{position:"relative"},loadingHolder:{position:"absolute",zIndex:5,backgroundColor:"#eaeaea",top:0,left:0,width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},stations:{margin:0,padding:0,listStyle:"none","& li":{height:"30px",display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr"},"& .title":{position:"sticky",top:0,backgroundColor:"white"}}})(De),Se=n(110),Oe=n.n(Se),we=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(p.a)(this,Object(f.a)(t).call(this,e))).componentDidMount=Object(u.a)(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.handleStationDataLoad();case 1:case"end":return e.stop()}},e)})),n.handleSwap=function(){var e=n.state,t=e.start,a=e.destination;a&&n.setState({start:a,destination:t,loading:!0},n.handleStationDataLoad)},n.handleSelectorChange=function(e){var t,a=e.target,r=a.name,i=a.value;return n.setState((t={},Object(c.a)(t,r,i),Object(c.a)(t,"loading",!0),t),n.handleStationDataLoad)},n.handleStationDataLoad=Object(u.a)(s.a.mark(function e(){var t,a,r,i;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.state,a=t.start,!(r=t.destination)){e.next=7;break}return e.next=4,A.getTrainsByRouteName(a,r);case 4:e.t0=e.sent,e.next=10;break;case 7:return e.next=9,A.getTrainsByStationName(a);case 9:e.t0=e.sent;case 10:i=e.t0,n.setState({routes:i,loading:!1});case 12:case"end":return e.stop()}},e)})),n.handleUpdate=function(){return n.setState({loading:!0},n.handleStationDataLoad)},n.handleTrainInfoClose=function(){return n.setState({trainInfoOpen:!1})},n.handleTrainInfoOpen=function(e){return function(){return n.setState({trainInfoOpen:!0,train:e})}},n.state={start:"\u9ad8\u96c4",destination:"",routes:[],loading:!1,trainInfoOpen:!1,train:void 0},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.state,t=e.start,n=e.destination,a=e.routes,i=e.loading,o=e.trainInfoOpen,c=e.train,l=this.handleSelectorChange,s=this.handleSwap,u=this.handleTrainInfoClose,m=this.handleTrainInfoOpen,d=this.handleUpdate;return r.a.createElement("div",{className:"App"},r.a.createElement(V,{start:t,destination:n,onChange:l,onSwap:s}),r.a.createElement(me,{onUpdate:d,loading:i,start:t,destination:n,routes:a,onOpenTrainInfo:m}),r.a.createElement(Oe.a,{fullWidth:!0,open:o,onClose:u,"aria-labelledby":"train-info"},c&&r.a.createElement(be,{key:c.TrainNo,id:c.TrainNo})))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(we,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[111,1,2]]]);
//# sourceMappingURL=main.bbd8dcb6.chunk.js.map