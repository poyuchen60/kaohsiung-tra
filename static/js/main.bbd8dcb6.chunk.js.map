{"version":3,"sources":["TRAApi.js","components/RouteSelector.js","components/TrainInfo.js","components/CountdownButton.js","components/StationInfo.js","components/TrainDetail.js","App.js","serviceWorker.js","index.js"],"names":["ids","基隆","八堵","七堵","五堵","汐止","南港","松山","萬華","臺北","板橋","山佳","樹林","鶯歌","桃園","內壢","中壢","埔心","楊梅","富岡","湖口","新豐","竹北","北新竹","新竹","香山","崎頂","竹南","三坑","百福","汐科","浮洲","北湖","南樹林","三姓橋","新富","談文","大山","後龍","龍港","新埔","白沙屯","通霄","苑裡","日南","大甲","臺中港","清水","沙鹿","龍井","大肚","追分","彰化","花壇","員林","永靖","社頭","斗六","南靖","臺南","大橋","豐富","烏日","鳳山","南州","內獅","吉安","大富","關山","漢本","瑞芳","龜山","冬山","八斗子","千甲","樹調","斗南","新營","保安","嘉北","南勢","大慶","九曲堂","崁頂","加祿","康樂","萬榮","池上","南澳","暖暖","大里","中里","平溪","內灣","花蓮港","民雄","林鳳營","大湖","橋頭","南科","泰安","頭家厝","麟洛","枋寮","瀧溪","林榮新光","東里","臺東","景美","貢寮","四城","十分","九讚頭","龍泉","大林","柳營","路竹","新左營","銅鑼","太原","六塊厝","林邊","枋野","平和","瑞穗","瑞源","和仁","三貂嶺","頭城","蘇澳新","上員","六家","沙崙","石榴","隆田","岡山","仁德","三義","新烏日","屏東","佳冬","古莊","壽豐","三民","鹿野","崇德","牡丹","頂埔","蘇澳","竹東","源泉","海科館","林內","拔林","楠梓","內惟","后里","栗林","歸來","東海","大武","豐田","玉里","山里","新城","雙溪","礁溪","大華","橫山","濁水","石龜","善化","左營","三塊厝","潭子","精武","竹田","科工館","太麻里","鳳林","富里","東澳","花蓮","石城","二結","嶺腳","富貴","水里","嘉義","新市","高雄","造橋","臺中","五權","潮州","正義","知本","光復","海端","武塔","四腳亭","大溪","羅東","菁桐","榮華","車埕","二水","後壁","中洲","大村","苗栗","成功","後庄","鎮安","枋山","志學","富源","瑞和","和平","侯硐","外澳","新馬","竹中","新莊","長榮大學","田中","水上","永康","鼓山","美術館","豐原","松竹","西勢","民族","金崙","南平","東竹","永樂","北埔","福隆","宜蘭","望古","合興","集集","trainType","1100","1101","1102","1103","1106","1107","1108","1109","1110","1111","1114","1115","1120","1131","1132","1140","110F","110A","110E","110B","110C","110D","lineType","0","1","2","pad","number","concat","estimatedTime","departureTime","arrivalTime","regExp","m1","exec","m2","s1","Number","s2","result","Math","trunc","dateString","t","arguments","length","undefined","Date","date","getDate","month","getMonth","year","getFullYear","timeString","encode","getHours","getMinutes","dataFilter","trains","map","_ref","TrainNo","EndingStationName","DepartureTime","TrainTypeID","Direction","ScheduledDepartureTime","DelayTime","Zh_tw","slice","TrainTypeName","routeFilter","_ref2","_ref2$DailyTrainInfo","DailyTrainInfo","OriginStopTime","ArrivalTime","DestinationStopTime","EstimatedTime","routeSorter","liveBoardTrains","current","liveBoardMap","reduce","Object","create","forEach","liveBoardTrain","filter","sort","t1","t2","sortByDirection","output","push","title","getData","_ref3","asyncToGenerator","regenerator_default","a","mark","_callee","url","sorter","promise","_args","wrap","_context","prev","next","fetch","then","res","json","abrupt","sent","stop","_x","apply","this","getLiveBoardByStationId","_ref4","_callee2","id","data","_context2","_x2","getTrainsByStationId","_ref5","_callee3","tString","liveBoard","final","_context3","dir","i","lTrains","sTrains","lt","st","_x3","trainInfoSorter","train","_train$DailyTrainInfo","StartingStationName","TripLine","WheelchairFlag","BreastFeedingFlag","DailyFlag","Note","StopTimes","_ref7","StationName","trainLiveSorter","_ref8","LastStationName","TRAApi","getTrainsByStationName","name","getTrainsByRouteName","_ref6","_callee4","start","destination","startId","destinationId","_context4","_x4","_x5","getTrainDetailById","_ref9","_callee5","infoUrl","liveUrl","_args5","_context5","Promise","all","objectSpread","_x6","stations","withStyles","formControl","minWidth","container","padding","display","justifyContent","marginBottom","button","alignSelf","fontSize","props","classes","onChange","onSwap","react_default","createElement","Paper_default","elevation","className","FormControl_default","variant","InputLabel_default","htmlFor","Select_default","value","input","OutlinedInput_default","labelWidth","s","MenuItem_default","key","Button_default","onClick","SwapHoriz_default","trainTypeValue","自強","太魯閣","普悠瑪","莒光","復興","區間快","區間車","普快車","TrainInfo","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","shouldComponentUpdate","nextProps","handleExpand","setState","folded","handleSort","sortBy","state","_this$state","_this$props","onOpenTrainInfo","hasMore","constainer","Typography_default","gutterBottom","align","isNaN","ExpandMore_default","ExpandLess_default","Component","backgroundColor","listStyle","margin","& li","gridTemplateColumns","height","& li.title","borderBottom","paddingBottom","& li.folded","& div","alignItems","& div.center","& div.left","& .clickable","cursor","& button","CountdownButton","componentDidMount","timer","setInterval","handleCountdown","componentWillUnmount","clearInterval","counter","loading","handleUpdateAndReset","secend","color","marginLeft","paddingTop","width","StationInfo","routes","onUpdate","header","components_CountdownButton","main","loadingHolder","components_TrainInfo","position","top","left","zIndex","TrainDetail","_this$state$train","lastIndex","findIndex","console","log","Fragment","DialogTitle_default","Train_default","Accessible_default","PregnantWoman_default","DialogContent_default","& .title","App","handleStationDataLoad","handleSwap","handleSelectorChange","_this$setState","_ref2$target","target","defineProperty","_this$state2","t0","handleUpdate","handleTrainInfoClose","trainInfoOpen","handleTrainInfoOpen","_this$state3","components_RouteSelector","components_StationInfo","Dialog_default","fullWidth","open","onClose","aria-labelledby","components_TrainDetail","Boolean","window","location","hostname","match","ReactDOM","render","src_App_0","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"4TAAMA,EAAM,CAACC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,qBAAM,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,qBAAM,OAAOC,qBAAM,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,qBAAM,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,qBAAM,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,qBAAM,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,qBAAM,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,qBAAM,OAAOC,eAAK,OAAOC,qBAAM,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,qBAAM,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,2BAAO,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,qBAAM,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,qBAAM,OAAOC,eAAK,OAAOC,eAAK,OAAOC,qBAAM,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,qBAAM,OAAOC,eAAK,OAAOC,qBAAM,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,qBAAM,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,qBAAM,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,qBAAM,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,qBAAM,OAAOC,qBAAM,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,qBAAM,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,OAAOC,eAAK,O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","file":"static/js/main.bbd8dcb6.chunk.js","sourcesContent":["const ids = {\"基隆\":\"1001\",\"八堵\":\"1002\",\"七堵\":\"1003\",\"五堵\":\"1004\",\"汐止\":\"1005\",\"南港\":\"1006\",\"松山\":\"1007\",\"萬華\":\"1009\",\"臺北\":\"1008\",\"板橋\":\"1011\",\"山佳\":\"1013\",\"樹林\":\"1012\",\"鶯歌\":\"1014\",\"桃園\":\"1015\",\"內壢\":\"1016\",\"中壢\":\"1017\",\"埔心\":\"1018\",\"楊梅\":\"1019\",\"富岡\":\"1020\",\"湖口\":\"1021\",\"新豐\":\"1022\",\"竹北\":\"1023\",\"北新竹\":\"1024\",\"新竹\":\"1025\",\"香山\":\"1026\",\"崎頂\":\"1027\",\"竹南\":\"1028\",\"三坑\":\"1029\",\"百福\":\"1030\",\"汐科\":\"1031\",\"浮洲\":\"1032\",\"北湖\":\"1033\",\"南樹林\":\"1034\",\"三姓橋\":\"1035\",\"新富\":\"1036\",\"談文\":\"1102\",\"大山\":\"1104\",\"後龍\":\"1105\",\"龍港\":\"1106\",\"新埔\":\"1108\",\"白沙屯\":\"1107\",\"通霄\":\"1109\",\"苑裡\":\"1110\",\"日南\":\"1111\",\"大甲\":\"1112\",\"臺中港\":\"1113\",\"清水\":\"1114\",\"沙鹿\":\"1115\",\"龍井\":\"1116\",\"大肚\":\"1117\",\"追分\":\"1118\",\"彰化\":\"1120\",\"花壇\":\"1202\",\"員林\":\"1203\",\"永靖\":\"1204\",\"社頭\":\"1205\",\"斗六\":\"1210\",\"南靖\":\"1218\",\"臺南\":\"1228\",\"大橋\":\"1239\",\"豐富\":\"1304\",\"烏日\":\"1320\",\"鳳山\":\"1402\",\"南州\":\"1413\",\"內獅\":\"1503\",\"吉安\":\"1602\",\"大富\":\"1613\",\"關山\":\"1626\",\"漢本\":\"1708\",\"瑞芳\":\"1804\",\"龜山\":\"1814\",\"冬山\":\"1824\",\"八斗子\":\"2003\",\"千甲\":\"2212\",\"樹調\":\"4102\",\"斗南\":\"1211\",\"新營\":\"1220\",\"保安\":\"1229\",\"嘉北\":\"1241\",\"南勢\":\"1307\",\"大慶\":\"1322\",\"九曲堂\":\"1404\",\"崁頂\":\"1412\",\"加祿\":\"1502\",\"康樂\":\"1517\",\"萬榮\":\"1611\",\"池上\":\"1624\",\"南澳\":\"1705\",\"暖暖\":\"1802\",\"大里\":\"1812\",\"中里\":\"1822\",\"平溪\":\"1907\",\"內灣\":\"2210\",\"花蓮港\":\"3202\",\"民雄\":\"1214\",\"林鳳營\":\"1222\",\"大湖\":\"1231\",\"橋頭\":\"1234\",\"南科\":\"1244\",\"泰安\":\"1314\",\"頭家厝\":\"1326\",\"麟洛\":\"1408\",\"枋寮\":\"1418\",\"瀧溪\":\"1510\",\"林榮新光\":\"1608\",\"東里\":\"1621\",\"臺東\":\"1632\",\"景美\":\"1713\",\"貢寮\":\"1809\",\"四城\":\"1819\",\"十分\":\"1904\",\"九讚頭\":\"2207\",\"龍泉\":\"2704\",\"大林\":\"1213\",\"柳營\":\"1221\",\"路竹\":\"1232\",\"新左營\":\"1242\",\"銅鑼\":\"1308\",\"太原\":\"1323\",\"六塊厝\":\"1405\",\"林邊\":\"1415\",\"枋野\":\"1505\",\"平和\":\"1605\",\"瑞穗\":\"1616\",\"瑞源\":\"1629\",\"和仁\":\"1710\",\"三貂嶺\":\"1806\",\"頭城\":\"1816\",\"蘇澳新\":\"1826\",\"上員\":\"2204\",\"六家\":\"2214\",\"沙崙\":\"5102\",\"石榴\":\"1209\",\"隆田\":\"1223\",\"岡山\":\"1233\",\"仁德\":\"1243\",\"三義\":\"1310\",\"新烏日\":\"1324\",\"屏東\":\"1406\",\"佳冬\":\"1416\",\"古莊\":\"1507\",\"壽豐\":\"1606\",\"三民\":\"1617\",\"鹿野\":\"1630\",\"崇德\":\"1711\",\"牡丹\":\"1807\",\"頂埔\":\"1817\",\"蘇澳\":\"1827\",\"竹東\":\"2205\",\"源泉\":\"2702\",\"海科館\":\"6103\",\"林內\":\"1208\",\"拔林\":\"1224\",\"楠梓\":\"1235\",\"內惟\":\"1245\",\"后里\":\"1315\",\"栗林\":\"1325\",\"歸來\":\"1407\",\"東海\":\"1417\",\"大武\":\"1508\",\"豐田\":\"1607\",\"玉里\":\"1619\",\"山里\":\"1631\",\"新城\":\"1712\",\"雙溪\":\"1808\",\"礁溪\":\"1818\",\"大華\":\"1903\",\"橫山\":\"2206\",\"濁水\":\"2703\",\"石龜\":\"1212\",\"善化\":\"1225\",\"左營\":\"1236\",\"三塊厝\":\"1247\",\"潭子\":\"1318\",\"精武\":\"1328\",\"竹田\":\"1410\",\"科工館\":\"1420\",\"太麻里\":\"1514\",\"鳳林\":\"1610\",\"富里\":\"1623\",\"東澳\":\"1704\",\"花蓮\":\"1715\",\"石城\":\"1811\",\"二結\":\"1821\",\"嶺腳\":\"1906\",\"富貴\":\"2209\",\"水里\":\"2706\",\"嘉義\":\"1215\",\"新市\":\"1226\",\"高雄\":\"1238\",\"造橋\":\"1302\",\"臺中\":\"1319\",\"五權\":\"1329\",\"潮州\":\"1411\",\"正義\":\"1421\",\"知本\":\"1516\",\"光復\":\"1612\",\"海端\":\"1625\",\"武塔\":\"1706\",\"四腳亭\":\"1803\",\"大溪\":\"1813\",\"羅東\":\"1823\",\"菁桐\":\"1908\",\"榮華\":\"2211\",\"車埕\":\"2707\",\"二水\":\"1207\",\"後壁\":\"1219\",\"中洲\":\"1230\",\"大村\":\"1240\",\"苗栗\":\"1305\",\"成功\":\"1321\",\"後庄\":\"1403\",\"鎮安\":\"1414\",\"枋山\":\"1504\",\"志學\":\"1604\",\"富源\":\"1614\",\"瑞和\":\"1628\",\"和平\":\"1709\",\"侯硐\":\"1805\",\"外澳\":\"1815\",\"新馬\":\"1825\",\"竹中\":\"2203\",\"新莊\":\"2213\",\"長榮大學\":\"5101\",\"田中\":\"1206\",\"水上\":\"1217\",\"永康\":\"1227\",\"鼓山\":\"1237\",\"美術館\":\"1246\",\"豐原\":\"1317\",\"松竹\":\"1327\",\"西勢\":\"1409\",\"民族\":\"1419\",\"金崙\":\"1512\",\"南平\":\"1609\",\"東竹\":\"1622\",\"永樂\":\"1703\",\"北埔\":\"1714\",\"福隆\":\"1810\",\"宜蘭\":\"1820\",\"望古\":\"1905\",\"合興\":\"2208\",\"集集\":\"2705\"};\r\nconst trainType = {\"1100\":\"自強\",\"1101\":\"自強\",\"1102\":\"太魯閣\",\"1103\":\"自強\",\"1106\":\"自強\",\"1107\":\"普悠瑪\",\"1108\":\"自強\",\"1109\":\"自強\",\"1110\":\"莒光\",\"1111\":\"莒光\",\"1114\":\"莒光\",\"1115\":\"莒光\",\"1120\":\"復興\",\"1131\":\"區間車\",\"1132\":\"區間快\",\"1140\":\"普快車\",\"110F\":\"自強\",\"110A\":\"自強\",\"110E\":\"自強\",\"110B\":\"自強\",\"110C\":\"自強\",\"110D\":\"自強\"}\r\nconst lineType = {0: '不經山海線', 1: '山線', 2: '海線'}\r\nconst pad = number => number < 10 ? `0${number}` : `${number}`;\r\nconst estimatedTime = (departureTime, arrivalTime) => {\r\n  const regExp = /(\\d\\d):(\\d\\d)/;\r\n  const m1 = regExp.exec(departureTime), m2 = regExp.exec(arrivalTime);\r\n  const s1 = Number(m1[1]) * 60 + Number(m1[2]);\r\n  const s2 = Number(m2[1]) * 60 + Number(m2[2]);\r\n  const result = s2 >= s1 ? (s2 - s1) : (1440 - s1 + s2);\r\n  return `${pad(Math.trunc(result / 60))}:${pad(result % 60)}`;\r\n}\r\nconst dateString = ( t = new Date()) => {\r\n  const date = pad(t.getDate()),\r\n    month = pad(t.getMonth() + 1),\r\n    year = t.getFullYear();\r\n  return `${year}-${month}-${date}`;\r\n}\r\nconst timeString = ( t = new Date(), encode = true) =>\r\n`${pad(t.getHours())}${encode ? '%3A' : ':'}${pad(t.getMinutes())}`\r\nconst dataFilter = trains => trains.map(({ \r\n  TrainNo, EndingStationName, DepartureTime,\r\n  TrainTypeID, Direction, ScheduledDepartureTime, DelayTime,\r\n}) => ({\r\n  TrainNo, Direction, DelayTime,\r\n  EndingStationName: EndingStationName.Zh_tw || EndingStationName,\r\n  DepartureTime: DepartureTime || ScheduledDepartureTime.slice(0, -3),\r\n  TrainTypeName: trainType[TrainTypeID]\r\n}));\r\nconst routeFilter = trains => trains.map( ({\r\n  DailyTrainInfo: {\r\n    TrainNo, Direction, TrainTypeID\r\n  },\r\n  OriginStopTime: { DepartureTime },\r\n  DestinationStopTime: { ArrivalTime }\r\n}) => ({\r\n  TrainNo, Direction,\r\n  DepartureTime,\r\n  ArrivalTime,\r\n  EstimatedTime: estimatedTime(DepartureTime, ArrivalTime),\r\n  TrainTypeName: trainType[TrainTypeID]\r\n}))\r\nconst routeSorter = (trains, liveBoardTrains) => {\r\n  const current = timeString(new Date(), false);\r\n  const liveBoardMap = liveBoardTrains.reduce( (map, t) => {\r\n    map[t.TrainNo] = t;\r\n    return map;\r\n  }, Object.create(null));\r\n  trains.forEach( t => {\r\n    const liveBoardTrain = liveBoardMap[t.TrainNo];\r\n    liveBoardTrain && (t.DelayTime = liveBoardTrain.DelayTime);\r\n  });\r\n\r\n  return trains\r\n    .filter( t => t.DepartureTime >= current || t.DelayTime >= 0 )\r\n    .sort( (t1, t2) => \r\n      t1.DepartureTime > t2.DepartureTime\r\n        ? 1\r\n        : t1.DepartureTime < t2.DepartureTime ? -1 : 0\r\n    );\r\n}\r\n\r\nconst sortByDirection = trains => trains.reduce( (output, t) => {\r\n  const { Direction } = t;\r\n  output[Direction].trains.push(t);\r\n  return output;\r\n}, [{title: '順行', trains: []}, {title: '逆行', trains: []}]);\r\nconst getData = async (url, filter = dataFilter, sorter = sortByDirection) => {\r\n  let promise = fetch(url).then( res => res.json());\r\n  filter && (promise = promise.then(filter));\r\n  sorter && (promise = promise.then(sorter));\r\n  return await promise;\r\n}\r\n\r\nconst getLiveBoardByStationId = async id => {\r\n  const url = `https://ptx.transportdata.tw/MOTC/v2/Rail/TRA/LiveBoard/Station/${id}?$select=TrainNo%2CEndingStationName%2CScheduledDepartureTime%2CTrainTypeID%2CDirection%2CDelayTime&$format=JSON`\r\n  const data = await getData(url)\r\n  return data;\r\n}\r\nconst getTrainsByStationId = async id => {\r\n  const t = new Date();\r\n  const current = timeString(t);\r\n  const tString = dateString(t);\r\n  const url = `https://ptx.transportdata.tw/MOTC/v2/Rail/TRA/DailyTimetable/Station/${id}/${tString}?$select=TrainNo%2CDirection%2CTrainTypeID%2CEndingStationName%2CDepartureTime&$filter=DepartureTime%20gt%20'${current}'&$orderby=DepartureTime%20asc&$format=JSON`\r\n  const data = await getData(url);\r\n  const liveBoard = await getLiveBoardByStationId(id);\r\n  const final = liveBoard.map( (dir, i) => {\r\n    let { trains: lTrains, title } = dir;\r\n    let { trains: sTrains } = data[i];\r\n    if( lTrains.length < 1)\r\n      return data[i];\r\n    else {\r\n      let map = Object.create(null);\r\n      lTrains.forEach( lt => (map[lt.TrainNo] = lt));\r\n      sTrains = sTrains.map( st => {\r\n        const t = map[st.TrainNo];\r\n        t && (delete map[st.TrainNo]);\r\n        return t || st;\r\n      });\r\n      return {\r\n        title,\r\n        trains: lTrains\r\n          .filter( lt => map[lt.TrainNo])\r\n          .concat(sTrains)\r\n      }\r\n    }\r\n  })\r\n  return final;\r\n}\r\nconst getTrainsByStationName = name => getTrainsByStationId(ids[name]);\r\nconst getTrainsByRouteName = async (start, destination) => {\r\n  const startId = ids[start], destinationId = ids[destination];\r\n  const date = dateString();\r\n  const url = `https://ptx.transportdata.tw/MOTC/v2/Rail/TRA/DailyTimetable/OD/${startId}/to/${destinationId}/${date}?$select=DailyTrainInfo%2COriginStopTime%2CDestinationStopTime&$format=JSON`\r\n  const liveBoard = await getLiveBoardByStationId(startId);\r\n  const liveBoardTrains = liveBoard[0].trains.concat(liveBoard[1].trains);\r\n  const data = await getData(url, routeFilter, trains => ([{\r\n    title: `往 ${destination}`,\r\n    trains: routeSorter(trains, liveBoardTrains)\r\n  }]));\r\n  return data;\r\n}\r\nconst trainInfoSorter = train => {\r\n  let {\r\n    DailyTrainInfo: {\r\n      TrainNo, Direction, StartingStationName,\r\n      EndingStationName, TrainTypeID,\r\n      TripLine, WheelchairFlag, BreastFeedingFlag, DailyFlag, Note\r\n    },\r\n    StopTimes\r\n  } = train;\r\n  StopTimes = StopTimes.map( ({\r\n    StationName, ArrivalTime, DepartureTime\r\n  }) => ({ StationName: StationName.Zh_tw, ArrivalTime, DepartureTime}))\r\n  return {\r\n    TrainNo, Direction,\r\n    TrainTypeName: trainType[TrainTypeID],\r\n    StartingStationName: StartingStationName.Zh_tw,\r\n    EndingStationName: EndingStationName.Zh_tw,\r\n    TripLine: lineType[TripLine],\r\n    WheelchairFlag: !!WheelchairFlag,\r\n    BreastFeedingFlag: !!BreastFeedingFlag,\r\n    DailyFlag: !!DailyFlag,\r\n    Note: (Note && Note.Zh_tw) || '',\r\n    StopTimes\r\n  }\r\n}\r\nconst trainLiveSorter = ({StationName, DelayTime}) => ({\r\n  DelayTime,\r\n  LastStationName: StationName && StationName.Zh_tw\r\n})\r\nconst getTrainDetailById = async (id, date=new Date()) => {\r\n  const infoUrl = `https://ptx.transportdata.tw/MOTC/v2/Rail/TRA/DailyTimetable/TrainNo/${id}/TrainDate/${dateString(date)}?$select=DailyTrainInfo%2CStopTimes&$format=JSON`;\r\n  const liveUrl = `https://ptx.transportdata.tw/MOTC/v2/Rail/TRA/LiveTrainDelay?$select=StationName%2CDelayTime&$filter=TrainNo%20eq%20'${id}'&$format=JSON`;\r\n  const data = await Promise.all([\r\n    getData(infoUrl, data => data[0], trainInfoSorter),\r\n    getData(liveUrl, data => data[0] || {}, trainLiveSorter)\r\n  ]);\r\n  return {...data[0], ...data[1]};\r\n}\r\n\r\nexport default {\r\n  getTrainsByStationId,\r\n  getTrainsByStationName,\r\n  getTrainsByRouteName,\r\n  getTrainDetailById,\r\n};","import React from 'react';\r\n\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Button from '@material-ui/core/Button';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport OutlinedInput from '@material-ui/core/OutlinedInput';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport Swap from '@material-ui/icons/SwapHoriz';\r\n\r\nconst styles = ({\r\n  formControl: {\r\n    minWidth: '100px'\r\n  },\r\n  container: {\r\n    padding: '12px 0px',\r\n    display: 'flex',\r\n    justifyContent: 'space-evenly',\r\n    marginBottom: '8px'\r\n  },\r\n  button: {\r\n    alignSelf: 'center',\r\n    fontSize: '50px',\r\n    padding: '0 10px'\r\n  }\r\n})\r\n\r\nconst stations = [\r\n  \"新左營\", \"左營\", \"內惟\", \"美術館\", \"鼓山\", \"三塊厝\",\r\n  \"高雄\", \"民族\", \"科工館\", \"正義\", \"鳳山\", '臺南'\r\n]\r\n\r\nconst RouteSelector = props => {\r\n\r\n    const {\r\n      classes,\r\n      start, destination,\r\n      onChange, onSwap\r\n    } = props;\r\n\r\n    return <Paper elevation={1} className={classes.container}>\r\n      <FormControl variant=\"outlined\" className={classes.formControl}>\r\n          <InputLabel\r\n            htmlFor=\"start\"\r\n          >\r\n            起站\r\n          </InputLabel>\r\n          <Select\r\n            value={start}\r\n            onChange={onChange}\r\n            input={\r\n              <OutlinedInput\r\n                labelWidth={30}\r\n                name=\"start\"\r\n                id=\"start\"\r\n              />\r\n            }\r\n          >\r\n          { stations.map( (s, i) => s !== destination && <MenuItem key={i} value={s}>\r\n            {s}\r\n          </MenuItem>) }\r\n          </Select>\r\n        </FormControl>\r\n\r\n        <Button onClick={onSwap} className={classes.button}>\r\n          <Swap fontSize='large' />\r\n        </Button>\r\n\r\n        <FormControl variant=\"outlined\" className={classes.formControl}>\r\n          <InputLabel\r\n            htmlFor=\"destination\"\r\n          >\r\n            迄站\r\n          </InputLabel>\r\n          <Select\r\n            value={destination}\r\n            onChange={onChange}\r\n            input={\r\n              <OutlinedInput\r\n                labelWidth={30}\r\n                name=\"destination\"\r\n                id=\"destination\"\r\n              />\r\n            }\r\n          >\r\n            <MenuItem value=\"\">\r\n              <em>無</em>\r\n            </MenuItem>\r\n            { stations.map( (s, i) => s !== start && <MenuItem key={i} value={s}>\r\n              {s}\r\n            </MenuItem>) }\r\n          </Select>\r\n        </FormControl>\r\n    </Paper>\r\n}\r\n\r\nexport default withStyles(styles)(RouteSelector);","import React,{ Component } from 'react';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\n\r\nimport ExpandIcon from '@material-ui/icons/ExpandMore';\r\nimport FoldIcon from '@material-ui/icons/ExpandLess';\r\n\r\nconst styles = ({\r\n  constainer: {\r\n    backgroundColor: '#eaeaea',\r\n    padding: '5px'\r\n  },\r\n  trains: {\r\n    listStyle: 'none',\r\n    padding: 0,\r\n    margin: 0,\r\n    '& li': {\r\n      display: 'grid',\r\n      gridTemplateColumns: '40px 60px 1fr 50px 60px',\r\n      height: '30px'\r\n    },\r\n    '& li.title': {\r\n      borderBottom: '1px solid gray',\r\n      height: 'auto',\r\n      paddingBottom: '5px',\r\n      marginBottom: '5px',\r\n    },\r\n    '& li.folded': {\r\n      display: 'none',\r\n    },\r\n    '& div': {\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      justifyContent: 'flex-end'\r\n    },\r\n    '& div.center': {\r\n      justifyContent: 'space-evenly'\r\n    },\r\n    '& div.left': {\r\n      justifyContent: 'flex-start'\r\n    },\r\n    '& .clickable': {\r\n      cursor: 'pointer'\r\n    },\r\n    '& button': {\r\n      padding: 0,\r\n      minWidth: 'auto'\r\n    }\r\n  }\r\n})\r\nconst sort = function(){\r\n  const trainTypeValue = ({\r\n    \"自強\": 2, \"太魯閣\": 1, \"普悠瑪\": 0,\r\n    \"莒光\": 3, \"復興\": 4, \"區間快\": 5, \"區間車\": 6, \"普快車\": 7\r\n  })\r\n  const sortByTrainType = (t1, t2) => \r\n    trainTypeValue[t1.TrainTypeName] - trainTypeValue[t2.TrainTypeName]\r\n  const sortByDepartureTime = (t1, t2) => \r\n    t1.DepartureTime > t2.DepartureTime\r\n      ? 1\r\n      : t1.DepartureTime < t2.DepartureTime ? -1 : 0;\r\n  return {\r\n    TrainTypeName: sortByTrainType,\r\n    DepartureTime: sortByDepartureTime\r\n  }\r\n}();\r\n \r\nclass TrainInfo extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      folded: true,\r\n      sortBy: 'DepartureTime'\r\n    }\r\n  }\r\n\r\n  shouldComponentUpdate = (nextProps) => {\r\n    const { destination } = this.props;\r\n    return !(destination !== nextProps.destination);\r\n  }\r\n\r\n  handleExpand = () =>\r\n    this.setState(({folded}) => ({folded: !folded}));\r\n  \r\n  handleSort = (sortBy) => () => this.setState({sortBy})\r\n  \r\n  render() {\r\n    const { folded, sortBy } = this.state;\r\n    const { classes, title, trains, destination, onOpenTrainInfo } = this.props;\r\n    const { handleExpand, handleSort } = this;\r\n    sort[sortBy] && trains.sort(sort[sortBy]);\r\n    const length = destination ? 7 : 2;\r\n    const hasMore = trains.length > length;\r\n    return <div className={classes.constainer}>\r\n      <Typography variant=\"h6\" gutterBottom align='left'>\r\n        {title}\r\n      </Typography>\r\n      <ul className={classes.trains}>\r\n        <li className='title'>\r\n          <div className='center'>車次</div>\r\n          <div>\r\n            <span\r\n              className='clickable'\r\n              onClick={handleSort('TrainTypeName')}\r\n            >車種</span>\r\n          </div>\r\n          <div className='center'>\r\n            <span\r\n              onClick={handleSort('DepartureTime')}\r\n              className='clickable'\r\n            >開車</span>\r\n            { destination && <span>抵達</span> }\r\n          </div>\r\n          <div className='left'>{destination ? \"耗時\" : \"終點\"}</div>\r\n          <div className='center'>誤點</div>\r\n        </li>\r\n        { trains.map( (t, i) =><li\r\n          key={i}\r\n          className={ (i > length && folded) ? 'folded' : undefined }\r\n        >\r\n          <Button\r\n            onClick={onOpenTrainInfo({\r\n              TrainNo: t.TrainNo,\r\n              Direction: t.Direction,\r\n              TrainTypeName: t.TrainTypeName,\r\n              Date: new Date()\r\n            })}\r\n          >{t.TrainNo}</Button>\r\n          <div>{t.TrainTypeName}</div>\r\n          <div className='center'>\r\n            <span>{t.DepartureTime}</span>\r\n            { destination && <span>{t.ArrivalTime}</span> }\r\n          </div>\r\n          <div className='left'>\r\n            { destination ? t.EstimatedTime : t.EndingStationName }\r\n          </div>\r\n          <div className='center'>{\r\n            isNaN(t.DelayTime)\r\n            ? undefined\r\n            : t.DelayTime === 0 ? '準點' : `${t.DelayTime}分`\r\n          }</div>\r\n        </li>) }\r\n      </ul>\r\n      { hasMore && <Button onClick={handleExpand} className={classes.button}>\r\n          { folded ? \"更多\" : \"摺疊\" }\r\n          { folded ? <ExpandIcon /> : <FoldIcon /> }\r\n      </Button> }\r\n    </div>\r\n  }\r\n}\r\n\r\n\r\nexport default withStyles(styles)(TrainInfo);","import React, { Component } from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nconst styles = ({\r\n  secend: {\r\n    color: '#d0d0d0',\r\n    marginLeft: '5px',\r\n    paddingTop: '2px',\r\n    width: '16px'\r\n  }\r\n})\r\n\r\nclass CountdownButton extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.timer = undefined;\r\n    this.state =  {\r\n      counter: 30,\r\n    }\r\n  }\r\n\r\n  componentDidMount = () => {\r\n    this.timer = setInterval(this.handleCountdown, 1000);\r\n  }\r\n  componentWillUnmount = () => {\r\n    clearInterval(this.timer);\r\n  }\r\n\r\n  handleCountdown = () => {\r\n    const { counter } = this.state;\r\n    const { loading } = this.props;\r\n    !loading && counter !== 0\r\n      ? this.setState({counter: counter - 1})\r\n      : this.handleUpdateAndReset()\r\n  }\r\n\r\n  handleUpdateAndReset = () => {\r\n    const { onClick } = this.props;\r\n    this.setState({counter: 30}, onClick);\r\n  }\r\n\r\n  render() {\r\n    const { classes } = this.props;\r\n    const { handleUpdateAndReset } = this;\r\n    const { counter } = this.state;\r\n    return <Button onClick={handleUpdateAndReset}>\r\n      {\"更新\"}\r\n      <span className={classes.secend}>{counter}</span>\r\n    </Button>\r\n  }\r\n}\r\n\r\nexport default withStyles(styles)(CountdownButton);","import React, { Component } from 'react';\r\nimport TrainInfo from './TrainInfo';\r\nimport CountdownButton from './CountdownButton';\r\n\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nconst styles = ({\r\n  container: {\r\n    padding: '7px'\r\n  },\r\n  main: {\r\n    position: 'relative'\r\n  },\r\n  loadingHolder: {\r\n    position: 'absolute',\r\n    top: 0,\r\n    left: 0,\r\n    height: '100%',\r\n    width: '100%',\r\n    backgroundColor: 'rgba(234,234,234,0.7)',\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    zIndex: 5\r\n  },\r\n  header: {\r\n    display: 'flex',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    marginBottom: '5px'\r\n  }\r\n})\r\n\r\nclass StationInfo extends Component {\r\n\r\n\r\n  render() {\r\n    const {\r\n      classes, routes, start, destination, loading,\r\n      onOpenTrainInfo, onUpdate\r\n    } = this.props;\r\n\r\n    return <Paper elevation={1} className={classes.container}>\r\n      <div className={classes.header}>\r\n        <Typography variant=\"h5\" align='left'>\r\n          { `從 ${start} 出發` }\r\n        </Typography>\r\n        <CountdownButton\r\n          loading={loading}\r\n          key={`${start}&${destination}`}\r\n          onClick={onUpdate}\r\n        />\r\n      </div>\r\n      <div className={classes.main}>\r\n        { loading &&\r\n          <div className={classes.loadingHolder}>Loading...</div>\r\n        }\r\n        { routes.map( ({title, trains}) =>\r\n          <TrainInfo\r\n            key={`${start}#${title}`}\r\n            title={title}\r\n            trains={trains}\r\n            destination={destination || ''}\r\n            onOpenTrainInfo={onOpenTrainInfo}\r\n          />)\r\n        }\r\n      </div>\r\n    </Paper>\r\n  }\r\n}\r\n\r\n\r\nexport default withStyles(styles)(StationInfo);","import React, { Component } from 'react';\r\nimport TRAApi from '../TRAApi';\r\n\r\nimport Typography from '@material-ui/core/Typography';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport ForwardIcon from '@material-ui/icons/ArrowForwardIos';\r\nimport WheelIcon from '@material-ui/icons/Accessible';\r\nimport DailyIcon from '@material-ui/icons/Train';\r\nimport FeedingIcon from '@material-ui/icons/PregnantWoman';\r\n\r\n\r\nconst styles = ({\r\n  container: {\r\n    position: 'relative',\r\n  },\r\n  loadingHolder: {\r\n    position: 'absolute',\r\n    zIndex: 5,\r\n    backgroundColor: '#eaeaea',\r\n    top: 0,\r\n    left: 0,\r\n    width: '100%',\r\n    height: '100%',\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    alignItems: 'center'\r\n  },\r\n  stations: {\r\n    margin: 0,\r\n    padding: 0,\r\n    listStyle: 'none',\r\n    '& li': {\r\n      height: '30px',\r\n      display: 'grid',\r\n      gridTemplateColumns: '1fr 1fr 1fr 1fr'\r\n    },\r\n    '& .title': {\r\n      position: 'sticky',\r\n      top: 0,\r\n      backgroundColor: 'white'\r\n    }\r\n  }\r\n})\r\n\r\nclass TrainDetail extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      loading: true,\r\n      train: {},\r\n    }\r\n  }\r\n  \r\n  componentDidMount = async () => {\r\n    const { id } = this.props;\r\n    const train = await TRAApi.getTrainDetailById(id);\r\n    this.setState({loading: false, train});\r\n  }\r\n\r\n  render() {\r\n    const { classes, id } = this.props;\r\n    const {\r\n      train: {\r\n        StartingStationName, EndingStationName,\r\n        WheelchairFlag, BreastFeedingFlag, DailyFlag,\r\n        TripLine, Note,\r\n        StopTimes, DelayTime, LastStationName,\r\n      }, loading\r\n    } = this.state;\r\n    const lastIndex = LastStationName\r\n      ? StopTimes.findIndex( s => s.StationName === LastStationName)\r\n      : -2;\r\n    console.log(lastIndex, StopTimes, LastStationName);\r\n    return <>\r\n      {\r\n        loading && \r\n          <div className={classes.loadingHolder}>{'Loading'}</div>\r\n      }\r\n      <DialogTitle id=\"train-info-title\">\r\n        <div>{`${id}`}</div>\r\n        {\r\n          !loading && <div className={classes.header}>\r\n            <Typography variant=\"h6\" gutterBottom>\r\n              {`${StartingStationName}  >>  ${EndingStationName}`}\r\n            </Typography>\r\n            <div>\r\n              { DailyFlag && <DailyIcon /> }\r\n              { WheelchairFlag && <WheelIcon /> }\r\n              { BreastFeedingFlag && <FeedingIcon /> }\r\n            </div>\r\n          </div>\r\n        }\r\n      </DialogTitle>\r\n      <DialogContent className={classes.container}>\r\n        { \r\n          !loading && <ul className={classes.stations}>\r\n            <li className='title'>\r\n              <div>站名</div>\r\n              <div>到站</div>\r\n              <div>離站</div>\r\n              <div>狀態</div>\r\n            </li>\r\n            { StopTimes.map( (s,i) => <li key={i}>\r\n                <div>{s.StationName}</div>\r\n                <div>{s.ArrivalTime}</div>\r\n                <div>{s.DepartureTime}</div>\r\n                <div>{\r\n                  i <= lastIndex\r\n                    ? '已過站'\r\n                    : i === lastIndex + 1 ? (DelayTime === 0 ? '準點' : `晚${DelayTime}分`) : ''\r\n                }</div>\r\n              </li>\r\n            )}\r\n          </ul>\r\n        }\r\n      </DialogContent>\r\n    </>\r\n  }\r\n}\r\n\r\nexport default withStyles(styles)(TrainDetail);","import React, { Component } from 'react';\nimport './App.css';\nimport TRAApi from './TRAApi';\n\nimport RouteSelector from './components/RouteSelector';\nimport StationInfo from './components/StationInfo';\nimport TrainDetail from './components/TrainDetail';\n\nimport Dialog from '@material-ui/core/Dialog';\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      start: '高雄',\n      destination: '',\n      routes: [],\n      loading: false,\n      trainInfoOpen: false,\n      train: undefined\n    }\n  }\n\n  componentDidMount = async () => {\n    this.handleStationDataLoad();\n  }\n\n  handleSwap = () => {\n    const { start, destination } = this.state;\n    destination\n    && this.setState(\n      {start: destination, destination: start, loading: true},\n      this.handleStationDataLoad\n    );\n  }\n\n  handleSelectorChange = ({target: {name, value}}) =>\n    this.setState(\n      {[name]: value, loading: true},\n      this.handleStationDataLoad\n    );\n\n  handleStationDataLoad = async () => {\n    const { start, destination } = this.state;\n    const routes = destination\n      ? await TRAApi.getTrainsByRouteName(start, destination)\n      : await TRAApi.getTrainsByStationName(start);\n    this.setState({routes, loading: false});\n  }\n  handleUpdate = () =>\n    this.setState({loading: true}, this.handleStationDataLoad);\n\n  handleTrainInfoClose = () => this.setState({trainInfoOpen: false});\n  handleTrainInfoOpen = (train) => () => this.setState({trainInfoOpen: true, train});\n\n  render() {\n    const {\n      start, destination,\n      routes, loading,\n      trainInfoOpen, train\n    } = this.state;\n    const {\n      handleSelectorChange,\n      handleSwap,\n      handleTrainInfoClose,\n      handleTrainInfoOpen,\n      handleUpdate\n    } = this;\n    return (\n      <div className=\"App\">\n        <RouteSelector\n          start={start} destination={destination}\n          onChange={handleSelectorChange}\n          onSwap={handleSwap}\n        />\n        <StationInfo\n          onUpdate={handleUpdate}\n          loading={loading}\n          start={start} destination={destination}\n          routes={routes}\n          onOpenTrainInfo={handleTrainInfoOpen}\n        />\n        <Dialog\n          fullWidth\n          open={trainInfoOpen}\n          onClose={handleTrainInfoClose}\n          aria-labelledby=\"train-info\"\n        >\n          { train && <TrainDetail\n            key={train.TrainNo}\n            id={train.TrainNo}\n          /> }\n        </Dialog>\n      </div>      \n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}